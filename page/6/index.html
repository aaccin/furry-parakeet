<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="互联网 | 前后端 | 创造 | 坚持">
<meta property="og:type" content="website">
<meta property="og:title" content="鸢飞无羁">
<meta property="og:url" content="http://rose1988c.github.io/page/6/index.html">
<meta property="og:site_name" content="鸢飞无羁">
<meta property="og:description" content="互联网 | 前后端 | 创造 | 坚持">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="鸢飞无羁">
<meta name="twitter:description" content="互联网 | 前后端 | 创造 | 坚持">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 鸢飞无羁 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">鸢飞无羁</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">是什么让风筝维持自由，是线，还是风，还是人</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-link">
          <a href="/link/" rel="section">
            
              <i class="menu-item-icon fa fa-question-circle fa-fw"></i> <br />
            
            链接
          </a>
        </li>
      

      
      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/24/think/activity-some-tips-of-raffle-items/" itemprop="url">
                  抽奖类活动项目的一些技术Tips
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-03-24T13:42:12+08:00" content="2014-03-24">
              2014-03-24
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="背景："><a href="#背景：" class="headerlink" title="背景："></a>背景：</h2><p>一般互联网产品为了拉升人气等，会有各种运营活动，活动一般会发实物奖品，就会吸引很多用户来抽奖，当然里面也会混杂很多专业刷奖的人，他们关注各个公司的抽奖活动以刷奖为生，所以我们的抽奖系统一定要设计的符合这种实际情况才安全，否则把奖品发超了，引来用户投诉吐槽，说明代码写的不到位，会影响技术人员的光荣伟大正确的形象的。（奖品内定或者程序里埋雷不属于本讨论范畴）</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014/03/24/think/activity-some-tips-of-raffle-items/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/20/language/php-psr2/" itemprop="url">
                  php-psr2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-03-20T13:25:21+08:00" content="2014-03-20">
              2014-03-20
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="psr2"><a href="#psr2" class="headerlink" title="psr2"></a>psr2</h2><p>sudo composer global require ‘squizlabs/php_codesniffer=*’</p>
<p>phpstorm</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">command + ,</div><div class="line"></div><div class="line">code sniffer</div><div class="line"></div><div class="line"><span class="regexp">/Users/</span>vanilla<span class="regexp">/.composer/</span>vendor<span class="regexp">/squizlabs/</span>php_codesniffer<span class="regexp">/scripts/</span>phpcs</div><div class="line"></div><div class="line"></div><div class="line">inspections</div><div class="line"></div><div class="line">add php support</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/20/language/mongo-study/" itemprop="url">
                  mongodb
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-03-20T13:25:21+08:00" content="2014-03-20">
              2014-03-20
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="mongo-笔记"><a href="#mongo-笔记" class="headerlink" title="mongo 笔记"></a>mongo 笔记</h2><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">show</span> dbs</div><div class="line"><span class="keyword">use</span> mydb</div><div class="line"><span class="meta"># db.dropDatabase()</span></div></pre></td></tr></table></figure>
<h3 id="mongodump备份数据库"><a href="#mongodump备份数据库" class="headerlink" title="mongodump备份数据库"></a>mongodump备份数据库</h3><ol>
<li>常用命令格</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodump -h IP --port 端口 -u 用户名 -<span class="selector-tag">p</span> 密码 -d 数据库 -o 文件存在路径</div></pre></td></tr></table></figure>
<blockquote>
<p>如果没有用户谁，可以去掉-u和-p。<br>  如果导出本机的数据库，可以去掉-h。<br>  如果是默认端口，可以去掉–port。<br>  如果想导出所有数据库，可以去掉-d。</p>
</blockquote>
<ol>
<li>导出所有数据库</li>
</ol>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodump -h <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> -o /tmp/mongodb/</div></pre></td></tr></table></figure>
<ol>
<li>导出指定数据库</li>
</ol>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongodump -h <span class="number">192.168</span><span class="number">.1</span><span class="number">.108</span> -d tank -o /tmp/mongodb/</div></pre></td></tr></table></figure>
<h3 id="mongorestore还原数据库"><a href="#mongorestore还原数据库" class="headerlink" title="mongorestore还原数据库"></a>mongorestore还原数据库</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">mongorestore</span> <span class="literal">-</span><span class="comment">h</span> <span class="comment">IP</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">port</span> <span class="comment">端口</span> <span class="literal">-</span><span class="comment">u</span> <span class="comment">用户名</span> <span class="literal">-</span><span class="comment">p</span> <span class="comment">密码</span> <span class="literal">-</span><span class="comment">d</span> <span class="comment">数据库</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">drop</span> <span class="comment">文件存在路径</span></div></pre></td></tr></table></figure>
<blockquote>
<p>–drop的意思是，先删除所有的记录，然后恢复。</p>
</blockquote>
<p>恢复所有数据库到mongodb中</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongorestore <span class="regexp">/tmp/mongodb/</span>   <span class="comment">#这里的路径是所有库的备份路径</span></div></pre></td></tr></table></figure>
<p>还原指定的数据库</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mongorestore -d tank <span class="regexp">/tmp/m</span>ongodb<span class="regexp">/tank/</span>    <span class="comment">#tank这个数据库的备份路径</span></div><div class="line">mongorestore -d tank_new  <span class="regexp">/tmp/m</span>ongodb<span class="regexp">/tank/</span>    <span class="comment">#将tank还有tank_new数据库中</span></div></pre></td></tr></table></figure>
<blockquote>
<p>这二个命令，可以实现数据库的备份与还原，文件格式是json和bson的。无法指写到表备份或者还原。</p>
</blockquote>
<h3 id="mongoexport导出表，或者表中部分字段"><a href="#mongoexport导出表，或者表中部分字段" class="headerlink" title="mongoexport导出表，或者表中部分字段"></a>mongoexport导出表，或者表中部分字段</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongoexport -h IP --port 端口 -u 用户名 -<span class="selector-tag">p</span> 密码 -d 数据库 -c 表名 -f 字段 -<span class="selector-tag">q</span> 条件导出 --csv -o 文件名</div></pre></td></tr></table></figure>
<blockquote>
<p>-f 导出指字段，以字号分割，-f name,email,age导出name,email,age这三个字段<br>  -q 可以根查询条件导出，-q ‘{ “uid” : “100” }’ 导出uid为100的数据<br>  –csv 表示导出的文件格式为csv的，这个比较有用，因为大部分的关系型数据库都是支持csv，在这里有共同点</p>
</blockquote>
<p>导出整张表</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongoexport -d tank -c users -o <span class="regexp">/tmp/m</span>ongodb<span class="regexp">/tank/u</span>sers.dat</div></pre></td></tr></table></figure>
<p>导出表中部分字段</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongoexport <span class="_">-d</span> tank -c users --csv <span class="_">-f</span> uid,name,sex -o tank/users.csv</div></pre></td></tr></table></figure>
<p>根据条件导出数据</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">mongoexport</span> -d tank -c users -q <span class="string">'&#123;uid:&#123;<span class="variable">$gt</span>:1&#125;&#125;'</span> -o tank/users.json</div></pre></td></tr></table></figure>
<h3 id="mongoimport导入表，或者表中部分字段"><a href="#mongoimport导入表，或者表中部分字段" class="headerlink" title="mongoimport导入表，或者表中部分字段"></a>mongoimport导入表，或者表中部分字段</h3><p>还原整表导出的非csv文件</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">mongoimport</span> <span class="literal">-</span><span class="comment">h</span> <span class="comment">IP</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">port</span> <span class="comment">端口</span> <span class="literal">-</span><span class="comment">u</span> <span class="comment">用户名</span> <span class="literal">-</span><span class="comment">p</span> <span class="comment">密码</span> <span class="literal">-</span><span class="comment">d</span> <span class="comment">数据库</span> <span class="literal">-</span><span class="comment">c</span> <span class="comment">表名</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">upsert</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">drop</span> <span class="comment">文件名</span></div></pre></td></tr></table></figure>
<blockquote>
<p>重点说一下–upsert，其他参数上面的命令已有提到，–upsert 插入或者更新现有数据</p>
</blockquote>
<p>还原部分字段的导出文件</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">mongoimport</span> <span class="literal">-</span><span class="comment">h</span> <span class="comment">IP</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">port</span> <span class="comment">端口</span> <span class="literal">-</span><span class="comment">u</span> <span class="comment">用户名</span> <span class="literal">-</span><span class="comment">p</span> <span class="comment">密码</span> <span class="literal">-</span><span class="comment">d</span> <span class="comment">数据库</span> <span class="literal">-</span><span class="comment">c</span> <span class="comment">表名</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">upsertFields</span> <span class="comment">字段</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">drop</span> <span class="comment">文件名</span></div></pre></td></tr></table></figure>
<blockquote>
<p>–upsertFields根–upsert一样</p>
</blockquote>
<p>还原导出的csv文件</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">mongoimport</span> <span class="literal">-</span><span class="comment">h</span> <span class="comment">IP</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">port</span> <span class="comment">端口</span> <span class="literal">-</span><span class="comment">u</span> <span class="comment">用户名</span> <span class="literal">-</span><span class="comment">p</span> <span class="comment">密码</span> <span class="literal">-</span><span class="comment">d</span> <span class="comment">数据库</span> <span class="literal">-</span><span class="comment">c</span> <span class="comment">表名</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">type</span> <span class="comment">类型</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">headerline</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">upsert</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">drop</span> <span class="comment">文件名</span></div></pre></td></tr></table></figure>
<p>还原导出的表数据</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongoimport -d tank -c users <span class="comment">--upsert tank/users.dat</span></div></pre></td></tr></table></figure>
<p>部分字段的表数据导入</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongoimport -d tank -c users  <span class="comment">--upsertFields uid,name,sex  tank/users.dat</span></div></pre></td></tr></table></figure>
<p>还原csv文件</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">mongoimport</span> <span class="literal">-</span><span class="comment">d</span> <span class="comment">tank</span> <span class="literal">-</span><span class="comment">c</span> <span class="comment">users</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">type</span> <span class="comment">csv</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">headerline</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">file</span> <span class="comment">tank/users</span><span class="string">.</span><span class="comment">csv</span></div></pre></td></tr></table></figure>
<p><abbr title="End of file">EOF</abbr></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/20/obsolete/composer/" itemprop="url">
                  PHP 开发者该知道的5个 Composer 小技巧
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-03-20T13:25:21+08:00" content="2014-03-20">
              2014-03-20
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>https 问题, 默认只接受<code>https</code>的下载地址, 如果证书失效, 不工作</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">composer <span class="built_in">config</span> -g <span class="comment">-- disable-tls true</span></div><div class="line">composer <span class="built_in">config</span> -g <span class="comment">-- secure-http false</span></div></pre></td></tr></table></figure>
<p><a href="http://getcomposer.org/">Composer</a>是新一代的PHP依赖管理工具。<br>其介绍和基本用法可以看这篇<a href="http://segmentfault.com/a/1190000000353129">《Composer PHP依赖管理的新时代》</a>。<br>本文介绍使用Composer的五个小技巧，希望能给你的PHP开发带来方便。</p>
<p><img src="http://segmentfault.com/img/bVbD1F" alt="composer"></p>
<h2 id="1-仅更新单个库"><a href="#1-仅更新单个库" class="headerlink" title="1. 仅更新单个库"></a>1. 仅更新单个库</h2><p>只想更新某个特定的库，不想更新它的所有依赖，很简单：</p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer update foo/<span class="built_in">bar</span></div></pre></td></tr></table></figure>
<p>此外，这个技巧还可以用来解决“警告信息问题”。你一定见过这样的警告信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Warning: The <span class="keyword">lock</span> <span class="keyword">file</span> <span class="keyword">is</span> <span class="keyword">not</span> up <span class="keyword">to</span> <span class="built_in">date</span> <span class="keyword">with</span> the latest changes <span class="keyword">in</span> composer.json, you may be getting outdated dependencies, run <span class="keyword">update</span> <span class="keyword">to</span> <span class="keyword">update</span> them.</div></pre></td></tr></table></figure>
<p>擦，哪里出问题了？别惊慌！如果你编辑了<code>composer.json</code>，你应该会看到这样的信息。比如，如果你增加或更新了细节信息，比如库的描述、作者、更多参数，甚至仅仅增加了一个空格，都会改变文件的<code>md5sum</code>。然后<code>Composer就会警告你哈希值和composer.lock</code>中记载的不同。</p>
<p>那么我们该怎么办呢？update命令可以更新lock文件，但是如果仅仅增加了一些描述，应该是不打算更新任何库。这种情况下，只需update nothing：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ composer <span class="keyword">update</span> <span class="keyword">nothing</span></div><div class="line">Loading composer repositories <span class="keyword">with</span> <span class="keyword">package</span> information</div><div class="line">Updating dependencies</div><div class="line"><span class="keyword">Nothing</span> <span class="keyword">to</span> <span class="keyword">install</span> <span class="keyword">or</span> <span class="keyword">update</span></div><div class="line">Writing <span class="keyword">lock</span> <span class="keyword">file</span></div><div class="line">Generating autoload files</div></pre></td></tr></table></figure>
<p>这样一来，<code>Composer</code>不会更新库，但是会更新<code>composer.lock</code>。注意<code>nothing</code>并不是<code>update</code>命令的关键字。只是没有<code>nothing</code> 这个包导致的结果。如果你输入<code>foobar</code>，结果也一样。</p>
<p>如果你用的<code>Composer</code>版本足够新，那么你可以直接使用<code>--lock</code>选项：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">composer <span class="keyword">update</span> <span class="comment">--lock</span></div></pre></td></tr></table></figure>
<ol>
<li>不编辑<code>composer.json</code>的情况下安装库</li>
</ol>
<p>你可能会觉得每安装一个库都需要修改<code>composer.json</code>太麻烦，那么你可以直接使用<code>require</code>命令。</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">composer</span> <span class="meta">require</span> <span class="string">"foo/bar:1.0.0"</span></div></pre></td></tr></table></figure>
<p>这个方法也可以用来快速地新开一个项目。<code>init</code>命令有<code>--require</code>选项，可以自动编写<code>composer.json</code>：（注意我们使用<code>-n</code>，这样就不用回答问题）</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ composer init --<span class="keyword">require</span>=foo/<span class="symbol">bar:</span><span class="number">1.0</span>.<span class="number">0</span> -n</div><div class="line">$ cat composer.json</div><div class="line">&#123;</div><div class="line">    <span class="string">"require"</span>: &#123;</div><div class="line">        <span class="string">"foo/bar"</span>: <span class="string">"1.0.0"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014/03/20/obsolete/composer/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/03/08/lnmp/yourls-short-url-system/" itemprop="url">
                  YOURLS - 搭建短网址生成系统
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-03-08T14:30:46+08:00" content="2014-03-08">
              2014-03-08
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><img src="http://c7photobucket.qiniudn.com/albums/tt107/Cople/yourls_zpsce92cb34.png" alt="YOURLS"></p>
<p><a href="http://yourls.org/">YOURLS</a> (Your Own URL Shortener) 是一款开源的PHP程序，让你可以轻松建立属于自己的短网址生成系统。而无需第三方平台你就可以获得所有的数据统计，并且支持一系列插件扩展。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014/03/08/lnmp/yourls-short-url-system/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/02/22/theme/xshell-theme-solarized-dark/" itemprop="url">
                  Xshell主题Solarized Dark
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-02-22T22:42:44+08:00" content="2014-02-22">
              2014-02-22
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="自定义Xshell颜色主题Color-Schemes"><a href="#自定义Xshell颜色主题Color-Schemes" class="headerlink" title="自定义Xshell颜色主题Color Schemes"></a>自定义Xshell颜色主题Color Schemes</h2><pre><code>&lt;color&gt;
[Solarized Dark]
text(bold)=839496
magenta(bold)=6c71c4
text=839496
white(bold)=fdf6e3
green=859900
red(bold)=cb4b16
green(bold)=586e75
black(bold)=073642
red=dc322f
blue=268bd2
black=002b36
blue(bold)=839496
yellow(bold)=657b83
cyan(bold)=93a1a1
yellow=b58900
magenta=dd3682
background=042028
white=eee8d5
cyan=2aa198
[Names]
count=1
name0=Solarized Dark
</code></pre><p>以上内容保存为<code>.xcs</code>文件下导入</p>
<p>设置<code>LS_COLORS</code>，通过<code>env</code>查看值，如相同可略过。</p>
<pre><code>alias ls=&apos;ls --color=auto&apos;
LS_COLORS=&apos;no=00:fi=00:di=00;34:ln=00;36:pi=40;33:so=00;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=00;32:*.cmd=00;32:*.exe=00;32:*.com=00;32:*.btm=00;32:*.bat=00;32:*.sh=00;32:*.csh=00;32:*.tar=00;31:*.tgz=00;31:*.arj=00;31:*.taz=00;31:*.lzh=00;31:*.zip=00;31:*.z=00;31:*.Z=00;31:*.gz=00;31:*.bz2=00;31:*.bz=00;31:*.tz=00;31:*.rpm=00;31:*.cpio=00;31:*.jpg=00;35:*.gif=00;35:*.bmp=00;35:*.xbm=00;35:*.xpm=00;35:*.png=00;35:*.tif=00;35:&apos;
export LS_COLORS
</code></pre><p><abbr title="End of file">EOF</abbr></p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/01/28/lnmp/apache-make-other-workspace/" itemprop="url">
                  apache 访问使用另外一个工作空间项目
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-28T15:35:55+08:00" content="2014-01-28">
              2014-01-28
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="DocumentRoot-主站网页存储位置"><a href="#DocumentRoot-主站网页存储位置" class="headerlink" title="DocumentRoot 主站网页存储位置"></a>DocumentRoot 主站网页存储位置</h2><p>一般<code>apache</code>默认一个<code>DocumentRoot</code>。多个<code>workspace</code> 如 <code>git</code>&amp;<code>workspace</code>&amp;<code>home</code></p>
<p>默认配置</p>
<pre><code>&lt;Directory /&gt;
    AllowOverride none
    Require all denied
/Directory&gt;
</code></pre><p>拒绝掉了所有不是指定目录的请求</p>
<p>我们可以修改一下</p>
<pre><code>&lt;Directory /&gt;
    #AllowOverride none
    #Require all denied
    Options FollowSymLinks
    AllowOverride ALL
    Order deny,allow
    Deny from all
&lt;/Directory&gt;
</code></pre>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014/01/28/lnmp/apache-make-other-workspace/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/01/20/obsolete/sublime-text-plug-arrange/" itemprop="url">
                  sublime-text-plug-arrange
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-20T22:06:07+08:00" content="2014-01-20">
              2014-01-20
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="front"><a href="#front" class="headerlink" title="front"></a>front</h3><ul>
<li>Emmet</li>
<li>Alignment</li>
</ul>
<h3 id="code-check"><a href="#code-check" class="headerlink" title="code check"></a>code check</h3><ul>
<li>Sublime Linter</li>
<li>Sublime CodeIntel</li>
<li>JSLint</li>
</ul>
<h3 id="php"><a href="#php" class="headerlink" title="php"></a>php</h3><ul>
<li>DocBlockr</li>
</ul>
<h3 id="SVN-GIT"><a href="#SVN-GIT" class="headerlink" title="SVN/GIT"></a>SVN/GIT</h3><ul>
<li>SublimeGit</li>
<li>TortoiseSVN</li>
</ul>
<h3 id="theme"><a href="#theme" class="headerlink" title="theme"></a>theme</h3><ul>
<li>made-of-code</li>
<li>Dayle Rees</li>
<li>Monokai-custom.tmTheme</li>
</ul>
<h3 id="other"><a href="#other" class="headerlink" title="other"></a>other</h3><ul>
<li>SideBarEnhancements</li>
</ul>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014/01/20/obsolete/sublime-text-plug-arrange/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/01/13/think/site-analysis-flow/" itemprop="url">
                  网站流量统计分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-13T15:26:48+08:00" content="2014-01-13">
              2014-01-13
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>网站流量统计目前有百度、谷歌、51la、站长统计…很多服务商都提供了统计功能。</p>
<p>但这里需要设计一个适合自身的网站流量统计系统。</p>
<h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul>
<li><p>日PV 200W访问量</p>
</li>
<li><p>千万级别数据访问</p>
</li>
<li><p>相应时间处理比较短</p>
</li>
</ul>
<h2 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h2><p><em>基本数据</em></p>
<ol>
<li>流量来源类型</li>
<li>来路域名、来路页面、受访域名、受访页面</li>
<li>回访客、新访客、访问时间</li>
<li>网络接入商类型、IP地址、浏览器、操作系统、分辨率、Cookie支持分析、语言、JavaScript支持、Flash支持、终端类型</li>
<li>关键字、搜索引擎类型</li>
</ol>
<p><em>统计数据（时间、地域、访客环境的条件）</em></p>
<ol>
<li>PV：总数、历史最高、历史累计、人均、平均、新访客、回访客、来路域名、来路页面、流量来源、唯一、非跳出、每次访问</li>
<li>IP：总数、关键字</li>
<li>独立访客：新访客数、回访客数、来路域名、来路页面、关键字</li>
<li>访问次数：人均、新访客、回访客、来路域名、来路页面、搜索引擎、关键字、不同PV、不同回访次数</li>
<li>平均停留时间、平均访问页数、平均访问时长</li>
<li>回访次数、访问间隔、第一次来访时间、第一次来路域名、第一来路页面</li>
<li>入口页面、退出页面、最常入口页面、最常退出页面、进入次数</li>
<li>首页快照时间、最近一次收录时间、收录数量、反向链接数量</li>
</ol>
<p>CONTINUE</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014/01/13/think/site-analysis-flow/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/01/08/think/activity-design/" itemprop="url">
                  活动需求
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-01-08T18:00:41+08:00" content="2014-01-08">
              2014-01-08
            </time>
          </span>

          

          
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="活动需求"><a href="#活动需求" class="headerlink" title="活动需求"></a>活动需求</h2><p>提升用户黏性</p>
<p>对周期短、开发活动频繁、内容形式繁多的活动做一个统一的规范。开发一个管理、展示的平台。用户通过平台能对自身所需的活动有一个明确的规范，并能在创建后，自身配置整个活动的信息。</p>
<p>一、    模板商店<br>用户根据自身需求去模板商店挑选对应的模板。提供标题，宣传语，主题素材，活动时间，模板id给我们，然后生成一个活动。如果没有提供相应的设计稿或者在线方案。<br>二、    活动配置<br>用户对活动的其他元素进行配置，如SEO、导航、logo，分享文案、尾部信息、奖品配置（奖品顺序、奖品概率、数量、抽奖时间段、频率、补仓、库存、预警、位置、图片）、活动规则进行配置</p>
<p>continue</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2014/01/08/think/activity-design/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="陈韵文" />
          <p class="site-author-name" itemprop="name">陈韵文</p>
          <p class="site-description motion-element" itemprop="description">互联网 | 前后端 | 创造 | 坚持</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives/">
              <span class="site-state-item-count">70</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>
          
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags/">
                <span class="site-state-item-count">72</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/rose1988c" target="_blank">
                  
                    <i class="fa fa-globe"></i> github
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://git.oschina.net/vanillan" target="_blank">
                  
                    <i class="fa fa-globe"></i> oschina
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/349252963" target="_blank">
                  
                    <i class="fa fa-globe"></i> weibo
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/gu-chang-feng" target="_blank">
                  
                    <i class="fa fa-globe"></i> zhihu
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://chenyunwen.cn" target="_blank">
                  
                    <i class="fa fa-globe"></i> about
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈韵文</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



<script src="https://s4.cnzz.com/z_stat.php?id=1260492671&web_id=1260492671" language="JavaScript"></script>

      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  

  
  


</body>
</html>
